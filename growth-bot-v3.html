<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù…Ù‡Ù†Ø¯Ø³ Ø§Ù„Ù†Ù…Ùˆ Ø§Ù„Ø±Ù‚Ù…ÙŠ</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;900&family=Tajawal:wght@300;400;500;700&display=swap" rel="stylesheet">
<style>
  :root {
    --bg-deep:      #0a0b0f;
    --bg-panel:     #111318;
    --bg-input:     #1e2330;
    --accent-gold:  #c8a84b;
    --accent-light: #e8cc7a;
    --accent-dim:   rgba(200,168,75,0.15);
    --accent-glow:  rgba(200,168,75,0.4);
    --bot-bubble:   #1a2035;
    --user-bubble:  linear-gradient(135deg,#c8a84b,#a07828);
    --text-primary: #eef0f6;
    --text-secondary:#8a91a8;
    --text-muted:   #4a5168;
    --border:       rgba(200,168,75,0.12);
    --border-hover: rgba(200,168,75,0.35);
    --radius-lg:    18px;
    --radius-md:    12px;
    --font-main:    'Cairo', 'Tajawal', sans-serif;
    --shadow-gold:  0 0 30px rgba(200,168,75,0.15);
  }

  * { margin:0; padding:0; box-sizing:border-box; }

  body {
    background: var(--bg-deep);
    font-family: var(--font-main);
    color: var(--text-primary);
    height: 100vh;
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }

  body::before {
    content:'';
    position:fixed; inset:0; z-index:0;
    background:
      radial-gradient(ellipse 60% 40% at 85% 10%, rgba(200,168,75,0.06) 0%, transparent 70%),
      radial-gradient(ellipse 40% 60% at 10% 90%, rgba(200,168,75,0.04) 0%, transparent 70%);
    pointer-events:none;
  }

  /* â”€â”€ Ù‡ÙŠØ¯Ø± â”€â”€ */
  .header {
    position:relative; z-index:10;
    background:rgba(17,19,24,0.95);
    border-bottom:1px solid var(--border);
    padding:14px 20px;
    display:flex; align-items:center; gap:14px;
    backdrop-filter:blur(20px);
    box-shadow:0 4px 24px rgba(0,0,0,0.4);
  }
  .bot-avatar {
    width:44px; height:44px; border-radius:50%;
    background:linear-gradient(135deg,#c8a84b,#7a5c1e);
    display:flex; align-items:center; justify-content:center;
    font-size:20px; flex-shrink:0;
    position:relative;
    animation:pulse 3s ease infinite;
  }
  .bot-avatar::after {
    content:'';
    position:absolute; bottom:1px; right:1px;
    width:10px; height:10px; border-radius:50%;
    background:#4cef8a;
    border:2px solid var(--bg-panel);
  }
  @keyframes pulse {
    0%,100%{ box-shadow:0 0 0 2px rgba(200,168,75,0.3); }
    50%    { box-shadow:0 0 0 5px rgba(200,168,75,0.1), 0 0 20px rgba(200,168,75,0.2); }
  }
  .header-info h1 { font-size:15px; font-weight:700; color:var(--accent-light); }
  .header-info p  { font-size:12px; color:var(--text-secondary); margin-top:1px; }
  .header-badge {
    margin-right:auto;
    background:var(--accent-dim);
    border:1px solid rgba(200,168,75,0.3);
    color:var(--accent-gold);
    font-size:11px; font-weight:600;
    padding:4px 10px; border-radius:20px;
  }

  /* â”€â”€ Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… â”€â”€ */
  .phase-bar {
    position:relative; z-index:9;
    background:rgba(17,19,24,0.8);
    border-bottom:1px solid var(--border);
    padding:8px 20px;
  }
  .phase-dots { display:flex; gap:6px; }
  .phase-dot {
    height:3px; flex:1; border-radius:2px;
    background:var(--text-muted); transition:background 0.4s;
  }
  .phase-dot.active { background:var(--accent-gold); }
  .phase-dot.done   { background:rgba(200,168,75,0.45); }
  .phase-label { font-size:11px; color:var(--text-muted); text-align:center; margin-top:4px; }

  /* â”€â”€ Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© â”€â”€ */
  .chat-area {
    flex:1; overflow-y:auto;
    padding:20px 16px;
    position:relative; z-index:5;
    scroll-behavior:smooth;
  }
  .chat-area::-webkit-scrollbar { width:4px; }
  .chat-area::-webkit-scrollbar-thumb { background:rgba(200,168,75,0.25); border-radius:4px; }

  /* â”€â”€ Ø±Ø³Ø§Ø¦Ù„ â”€â”€ */
  .msg-row {
    display:flex; gap:10px; margin-bottom:16px;
    animation:msgIn 0.3s cubic-bezier(.2,.8,.3,1) both;
  }
  .msg-row.user { flex-direction:row-reverse; }
  @keyframes msgIn {
    from { opacity:0; transform:translateY(10px) scale(0.97); }
    to   { opacity:1; transform:none; }
  }
  .msg-avatar {
    width:32px; height:32px; border-radius:50%;
    background:linear-gradient(135deg,#c8a84b,#7a5c1e);
    display:flex; align-items:center; justify-content:center;
    font-size:14px; flex-shrink:0; align-self:flex-end;
  }
  .msg-avatar.user-av {
    background:linear-gradient(135deg,#3a4a6b,#1e2a45);
    font-size:12px;
  }
  .bubble {
    max-width:min(84%,540px);
    padding:12px 16px; border-radius:var(--radius-lg);
    line-height:1.65; font-size:14px; word-break:break-word;
  }
  .bubble.bot {
    background:var(--bot-bubble);
    border:1px solid var(--border);
    border-bottom-right-radius:4px;
  }
  .bubble.user {
    background:var(--user-bubble);
    border-bottom-left-radius:4px;
    color:#fff; font-weight:500;
  }
  .bubble strong { color:var(--accent-light); font-weight:700; }
  .bubble .sec {
    display:block; color:var(--accent-gold);
    font-weight:700; font-size:13px;
    margin:10px 0 6px; padding-top:8px;
    border-top:1px solid var(--border);
  }
  .bubble .sec:first-child { margin-top:0; padding-top:0; border-top:none; }

  /* â”€â”€ Ø£Ø²Ø±Ø§Ø± Ø³Ø±ÙŠØ¹Ø© â”€â”€ */
  .quick-replies {
    display:flex; flex-wrap:wrap; gap:8px;
    margin-top:10px;
    animation:msgIn 0.35s 0.1s both;
  }
  .qr-btn {
    background:transparent;
    border:1px solid var(--border-hover);
    color:var(--accent-light);
    padding:8px 16px; border-radius:20px;
    font-family:var(--font-main); font-size:13px; font-weight:600;
    cursor:pointer; transition:all 0.2s; white-space:nowrap;
    position:relative; overflow:hidden;
  }
  .qr-btn::before {
    content:''; position:absolute; inset:0;
    background:var(--accent-dim); opacity:0; transition:opacity 0.2s;
  }
  .qr-btn:hover { border-color:var(--accent-gold); color:#fff; transform:translateY(-1px); }
  .qr-btn:hover::before { opacity:1; }
  .qr-btn.selected { background:var(--user-bubble); border-color:transparent; color:#fff; pointer-events:none; }
  .qr-btn:disabled { opacity:0.4; pointer-events:none; }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     Ù†Ù…ÙˆØ°Ø¬ ROI â€” Ø§Ù„Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ø¬ÙˆÙ‡Ø±ÙŠ v3
     
     Ø§Ù„Ù…Ø´ÙƒÙ„Ø© ÙÙŠ v2: Ø£Ø²Ø±Ø§Ø± toggleWeb ÙƒØ§Ù†Øª
     ØªØ³ØªØ®Ø¯Ù… onclick="" Ø¯Ø§Ø®Ù„ innerHTML
     Ù…Ù…Ø§ ÙŠØ³Ø¨Ø¨ Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø¨Ø¹Ø¶ Ø§Ù„Ù…ØªØµÙØ­Ø§Øª Ø¹Ù†Ø¯
     Ø­Ù‚Ù† HTML Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹.
     
     Ø§Ù„Ø­Ù„: Ø¥Ø²Ø§Ù„Ø© ÙƒÙ„ onclick="" Ù…Ù† Ø§Ù„Ù€ HTML
     ÙˆØ§Ø³ØªØ®Ø¯Ø§Ù… event delegation Ù…Ø±ÙƒØ²ÙŠ Ø¹Ù„Ù‰
     $chat Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ø°Ù„Ùƒ â€” Ù‡Ø°Ø§ Ø§Ù„Ù†Ù‡Ø¬ Ù…Ø¶Ù…ÙˆÙ†
     100% Ø¨ØºØ¶ Ø§Ù„Ù†Ø¸Ø± Ø¹Ù† ÙƒÙŠÙÙŠØ© Ø­Ù‚Ù† HTML.
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  .roi-form {
    margin-top:14px;
    display:flex; flex-direction:column; gap:12px;
  }
  .roi-field { display:flex; flex-direction:column; gap:5px; }
  .roi-field label { font-size:12px; font-weight:700; color:var(--text-secondary); }
  .field-wrap {
    display:flex; align-items:center; gap:8px;
    background:rgba(255,255,255,0.04);
    border:1px solid var(--border-hover);
    border-radius:var(--radius-md);
    padding:9px 12px;
    transition:border-color 0.2s, box-shadow 0.2s;
  }
  .field-wrap:focus-within {
    border-color:var(--accent-gold);
    box-shadow:0 0 0 2px rgba(200,168,75,0.12);
  }
  .roi-field input[type="number"] {
    flex:1; background:transparent;
    border:none; outline:none;
    color:var(--text-primary);
    font-family:var(--font-main); font-size:14px;
    direction:ltr; text-align:right;
    -moz-appearance:textfield;
  }
  .roi-field input[type="number"]::-webkit-outer-spin-button,
  .roi-field input[type="number"]::-webkit-inner-spin-button { -webkit-appearance:none; }
  .roi-field input::placeholder { color:var(--text-muted); }
  .unit { font-size:12px; color:var(--text-secondary); white-space:nowrap; }
  .field-hint { font-size:11px; color:var(--text-muted); }

  /* Ù…Ø¬Ù…ÙˆØ¹Ø© Ù†Ø¹Ù…/Ù„Ø§ */
  .roi-toggle { display:flex; gap:8px; }
  .roi-toggle-btn {
    flex:1; padding:9px 8px;
    border:1px solid var(--border-hover);
    border-radius:var(--radius-md);
    background:transparent;
    color:var(--text-secondary);
    font-family:var(--font-main); font-size:13px; font-weight:600;
    cursor:pointer; transition:all 0.2s;
    /* data-action ÙŠÙØ³ØªØ®Ø¯Ù… ÙÙŠ event delegation */
  }
  .roi-toggle-btn.active {
    border-color:var(--accent-gold);
    background:var(--accent-dim);
    color:var(--accent-light);
  }

  /* Ø²Ø± Ø§Ù„Ø­Ø³Ø§Ø¨ */
  .roi-submit {
    padding:11px;
    border:none; border-radius:var(--radius-md);
    background:linear-gradient(135deg,#c8a84b,#a07828);
    color:#fff; font-family:var(--font-main);
    font-size:14px; font-weight:700;
    cursor:pointer; transition:all 0.2s;
    /* data-action ÙŠÙØ³ØªØ®Ø¯Ù… ÙÙŠ event delegation */
  }
  .roi-submit:hover { transform:translateY(-1px); box-shadow:0 4px 16px var(--accent-glow); }
  .roi-submit:active { transform:translateY(0); }
  .roi-submit:disabled { opacity:0.5; cursor:not-allowed; transform:none; }

  .roi-error {
    color:#ff7070; font-size:12px; display:none;
    background:rgba(255,100,100,0.08);
    border-right:3px solid #ff7070;
    padding:6px 10px; border-radius:6px;
  }
  .roi-error.show { display:block; }

  /* â”€â”€ Ø¬Ø¯ÙˆÙ„ ROI â”€â”€ */
  .roi-table {
    width:100%; border-collapse:collapse;
    margin:10px 0 4px; font-size:12px;
  }
  .roi-table th {
    background:rgba(200,168,75,0.1); color:var(--accent-gold);
    font-weight:700; padding:6px 8px;
    border:1px solid var(--border); text-align:center;
  }
  .roi-table td {
    padding:5px 8px; border:1px solid var(--border); text-align:center;
  }
  .roi-table .rl { text-align:right; color:var(--text-secondary); font-weight:600; }
  .roi-table tr:hover td { background:rgba(255,255,255,0.02); }
  .stag { display:inline-block; padding:2px 7px; border-radius:10px; font-size:11px; font-weight:700; }
  .s-cons { background:rgba(255,165,0,0.15);  color:#ffb347; }
  .s-real { background:rgba(72,200,120,0.15); color:#4ec97a; }
  .s-opt  { background:rgba(100,180,255,0.15);color:#64b4ff; }

  /* â”€â”€ Ø¨Ø·Ø§Ù‚Ø© Ø®Ø¯Ù…Ø© â”€â”€ */
  .svc-card {
    background:rgba(200,168,75,0.05);
    border:1px solid rgba(200,168,75,0.2);
    border-radius:var(--radius-md);
    padding:12px 14px; margin:6px 0 4px;
  }
  /* ØªØ±ØªÙŠØ¨ Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©: 1 Ø°Ù‡Ø¨ÙŠØŒ 2 ÙØ¶ÙŠØŒ 3-5 Ø¹Ø§Ø¯ÙŠ */
  .svc-card.priority-1 { border-color:rgba(200,168,75,0.45); background:rgba(200,168,75,0.08); }
  .svc-card.priority-2 { border-color:rgba(160,160,180,0.3); }
  .svc-card .sct { color:var(--accent-light); font-weight:800; font-size:14px; margin-bottom:6px; }
  .svc-card .scr {
    display:flex; justify-content:space-between;
    font-size:12px; color:var(--text-secondary);
    margin-top:4px; gap:8px;
  }
  .svc-card .scr span { color:var(--text-primary); }
  .badge-gold {
    background:linear-gradient(135deg,#c8a84b,#a07828);
    color:#fff; font-size:10px; font-weight:700;
    padding:2px 8px; border-radius:10px;
    display:inline-block; margin-bottom:4px;
  }
  .badge-silver {
    background:linear-gradient(135deg,#8a91a8,#5a6178);
    color:#fff; font-size:10px; font-weight:700;
    padding:2px 8px; border-radius:10px;
    display:inline-block; margin-bottom:4px;
  }
  .badge-supp {
    background:rgba(200,168,75,0.2);
    color:var(--accent-gold); font-size:10px; font-weight:700;
    padding:2px 8px; border-radius:10px;
    display:inline-block; margin-bottom:4px;
  }
  .note {
    background:rgba(255,200,60,0.08);
    border-right:3px solid var(--accent-gold);
    border-radius:6px; padding:8px 12px;
    font-size:12px; color:var(--text-secondary);
    margin-top:8px; line-height:1.6;
  }

  /* â”€â”€ Ù…Ø¤Ø´Ø± Ø§Ù„ÙƒØªØ§Ø¨Ø© â”€â”€ */
  .typing-row {
    display:flex; align-items:center; gap:10px;
    margin-bottom:16px; animation:msgIn 0.2s both;
  }
  .dots {
    display:flex; gap:4px;
    background:var(--bot-bubble);
    border:1px solid var(--border);
    padding:12px 16px; border-radius:var(--radius-lg);
    border-bottom-right-radius:4px;
  }
  .dot {
    width:6px; height:6px; border-radius:50%;
    background:var(--accent-gold);
    animation:bounce 1.2s infinite; opacity:0.7;
  }
  .dot:nth-child(2){ animation-delay:0.2s; }
  .dot:nth-child(3){ animation-delay:0.4s; }
  @keyframes bounce {
    0%,80%,100%{ transform:translateY(0); opacity:0.7; }
    40%        { transform:translateY(-5px); opacity:1; }
  }

  /* â”€â”€ Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ â”€â”€ */
  .input-area {
    position:relative; z-index:10;
    background:rgba(17,19,24,0.97);
    border-top:1px solid var(--border);
    padding:12px 16px;
    backdrop-filter:blur(20px);
  }
  .input-wrap {
    display:flex; gap:10px; align-items:flex-end;
    background:var(--bg-input);
    border:1px solid var(--border);
    border-radius:24px;
    padding:8px 8px 8px 14px;
    transition:border-color 0.2s;
  }
  .input-wrap:focus-within {
    border-color:rgba(200,168,75,0.5);
    box-shadow:0 0 0 3px rgba(200,168,75,0.08);
  }
  #userInput {
    flex:1; background:transparent;
    border:none; outline:none;
    color:var(--text-primary);
    font-family:var(--font-main); font-size:14px;
    direction:rtl; padding:2px 0; min-height:22px;
  }
  #userInput::placeholder { color:var(--text-muted); }
  #userInput:disabled { opacity:0.5; cursor:not-allowed; }
  #sendBtn {
    width:38px; height:38px; border-radius:50%;
    background:linear-gradient(135deg,#c8a84b,#a07828);
    border:none; cursor:pointer;
    display:flex; align-items:center; justify-content:center;
    flex-shrink:0; transition:all 0.2s;
    color:#fff; font-size:16px;
  }
  #sendBtn:hover { transform:scale(1.08); box-shadow:0 4px 16px var(--accent-glow); }
  #sendBtn:active { transform:scale(0.96); }
  #sendBtn:disabled { opacity:0.4; cursor:not-allowed; transform:none; }
  .input-hint { text-align:center; font-size:11px; color:var(--text-muted); margin-top:6px; }

  @media(min-width:600px) {
    body { max-width:520px; margin:0 auto; box-shadow:0 0 60px rgba(0,0,0,0.6); }
  }
</style>
</head>
<body>

<div class="header">
  <div class="bot-avatar">ğŸ¤–</div>
  <div class="header-info">
    <h1>Ù…Ù‡Ù†Ø¯Ø³ Ø§Ù„Ù†Ù…Ùˆ Ø§Ù„Ø±Ù‚Ù…ÙŠ</h1>
    <p>Ø§Ù„Ù…Ø³ØªØ´Ø§Ø± Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠ Ø§Ù„Ø±Ø³Ù…ÙŠ â€¢ ÙŠØ±Ø¯ Ø§Ù„Ø¢Ù†</p>
  </div>
  <div class="header-badge">Ù…Ø¯Ø¹ÙˆÙ… Ø¨Ù€ AI</div>
</div>

<div class="phase-bar">
  <div class="phase-dots">
    <div class="phase-dot active" id="ph0"></div>
    <div class="phase-dot" id="ph1"></div>
    <div class="phase-dot" id="ph2"></div>
    <div class="phase-dot" id="ph3"></div>
  </div>
  <div class="phase-label" id="phLabel">Ø§Ù„ØªØ±Ø­ÙŠØ¨</div>
</div>

<div class="chat-area" id="chatArea"></div>

<div class="input-area">
  <div class="input-wrap">
    <input type="text" id="userInput" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§..." autocomplete="off"/>
    <button id="sendBtn">â¤</button>
  </div>
  <p class="input-hint">Ø§Ø¶ØºØ· Enter Ù„Ù„Ø¥Ø±Ø³Ø§Ù„ â€¢ Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø£Ø¹Ù„Ø§Ù‡</p>
</div>

<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø®Ø¯Ù…Ø§Øª [G]
   65+ Ø®Ø¯Ù…Ø© â€” Ø§Ù„Ù…ÙØ¯Ø±ÙØ¬Ø© Ù‡Ù†Ø§ Ù‡ÙŠ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø© ÙÙŠ Ø®Ø±ÙŠØ·Ø© [K]
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const SVC = {
  1:  {n:"Ø¨Ø­Ø« Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…ÙØªØ§Ø­ÙŠØ© Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠ",     p:"3,500â€“6,000",  d:"3-5 Ø£ÙŠØ§Ù…",    g:"Ø¥Ø¹Ø§Ø¯Ø© Ø¹Ù…Ù„ Ù…Ø¬Ø§Ù†ÙŠØ© Ø¥Ø°Ø§ Ù„Ù… ØªÙƒÙ† 70% Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªØ±ØªÙŠØ¨",   k:"Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø¹Ø¶ÙˆÙŠØ© 80%+ Ø®Ù„Ø§Ù„ 6 Ø£Ø´Ù‡Ø±", c:"SEO"},
  3:  {n:"ØªØ­Ø³ÙŠÙ† Ù…Ù„Ù Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ Ø¹Ù„Ù‰ Ø¬ÙˆØ¬Ù„ (GBP)",      p:"2,000â€“3,500",  d:"2-3 Ø£ÙŠØ§Ù…",    g:"Ø¸Ù‡ÙˆØ± ÙÙŠ Local Pack Ø®Ù„Ø§Ù„ 45 ÙŠÙˆÙ… Ø£Ùˆ Ø§Ø³ØªØ±Ø¯Ø§Ø¯ 30%",    k:"Ø¸Ù‡ÙˆØ± ÙÙŠ Ø£ÙˆÙ„ 3 Ù†ØªØ§Ø¦Ø¬ + Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù…ÙƒØ§Ù„Ù…Ø§Øª 150-300%", c:"SEO"},
  9:  {n:"ÙƒØªØ§Ø¨Ø© Ù†ØµÙˆØµ Ø§Ù„Ù…ÙˆÙ‚Ø¹ (Copywriting)",        p:"4,500â€“9,000",  d:"5-10 Ø£ÙŠØ§Ù…",   g:"Ø¥Ø¹Ø§Ø¯Ø© ÙƒØªØ§Ø¨Ø© Ø¥Ø°Ø§ Ù„Ù… ÙŠØªØ­Ø³Ù† Ø§Ù„ØªØ­ÙˆÙŠÙ„ 20%+",            k:"Ø²ÙŠØ§Ø¯Ø© Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„ 30-60%", c:"CRO"},
  10: {n:"Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø´Ø§Ø¦Ø¹Ø© Ø§Ù„Ø°ÙƒÙŠØ© (FAQ Schema)",    p:"2,500â€“4,500",  d:"3-5 Ø£ÙŠØ§Ù…",    g:"Ø¸Ù‡ÙˆØ± ÙÙŠ Rich Results Ø®Ù„Ø§Ù„ 30 ÙŠÙˆÙ…",                  k:"Ø¸Ù‡ÙˆØ± ÙÙŠ Featured Snippets Ù„Ù€5-10 Ø£Ø³Ø¦Ù„Ø©", c:"SEO"},
  12: {n:"Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† ÙØ¬ÙˆØ§Øª Ø§Ù„Ù…Ø­ØªÙˆÙ‰",                p:"4,000â€“7,500",  d:"4-6 Ø£ÙŠØ§Ù…",    g:"Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù„ÙŠÙ„ Ù…Ø¬Ø§Ù†ÙŠØ© Ø¨Ø¹Ø¯ 6 Ø£Ø´Ù‡Ø±",                    k:"Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª 80-150% Ø¨Ø¹Ø¯ Ø³Ø¯ Ø§Ù„ÙØ¬ÙˆØ§Øª", c:"SEO"},
  16: {n:"ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø³ÙŠÙˆ Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ Ø§Ù„Ø´Ø§Ù…Ù„",             p:"7,000â€“16,000", d:"2-4 Ø£Ø³Ø§Ø¨ÙŠØ¹",  g:"Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ø³ÙŠÙ† Ù…Ø¬Ø§Ù†ÙŠØ© Ø¨Ø¹Ø¯ 3 Ø£Ø´Ù‡Ø±",                    k:"Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø¹Ø¶ÙˆÙŠØ© 60-120%", c:"SEO"},
  32: {n:"Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø¬ÙˆØ¬Ù„ Ù„Ù„Ø¨Ø­Ø« (Search Ads)",        p:"3,500â€“8,000",  d:"3-5 Ø£ÙŠØ§Ù…",    g:"â€”",                                                 k:"50 Ù†Ù‚Ø±Ø© Ù…Ø¤Ù‡Ù„Ø© Ø®Ù„Ø§Ù„ Ø£ÙˆÙ„ 30 ÙŠÙˆÙ…", c:"Ads"},
  34: {n:"Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø³ØªÙ‡Ø¯Ø§Ù (Retargeting)",           p:"3,000â€“7,000",  d:"3-7 Ø£ÙŠØ§Ù…",    g:"10% ØªØ­ÙˆÙŠÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„",                               k:"ØªØ­ÙˆÙŠÙ„ 15-30% Ù…Ù† Ø§Ù„Ø²ÙˆØ§Ø± Ø§Ù„Ø¹Ø§Ø¦Ø¯ÙŠÙ†", c:"Ads"},
  35: {n:"Ø¥Ø¹Ù„Ø§Ù†Ø§Øª ÙÙŠØ³Ø¨ÙˆÙƒ ÙˆØ¥Ù†Ø³ØªØ¬Ø±Ø§Ù…",               p:"3,500â€“8,000",  d:"3-7 Ø£ÙŠØ§Ù…",    g:"â€”",                                                 k:"CTR 1.5%+ ÙˆCPA Ø£Ù‚Ù„ Ù…Ù† Ø§Ù„Ù…Ù†Ø§ÙØ³ÙŠÙ† Ø¨Ù€25%", c:"Ads"},
  38: {n:"ØªØ­Ø³ÙŠÙ† Ø¬ÙˆØ¯Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª (Quality Score)",   p:"4,500â€“9,000",  d:"1-2 Ø£Ø³Ø¨ÙˆØ¹",   g:"ØªØ­Ø³ÙŠÙ† QS Ø¨Ù€2+ Ù†Ù‚Ø§Ø· Ø£Ùˆ Ø§Ø³ØªØ±Ø¯Ø§Ø¯ 50%",                k:"ØªÙˆÙÙŠØ± 30-50% Ù…Ù† ØªÙƒÙ„ÙØ© Ø§Ù„Ù†Ù‚Ø±Ø©", c:"Ads"},
  40: {n:"Ø¥Ø¹Ù„Ø§Ù†Ø§Øª ÙŠÙˆØªÙŠÙˆØ¨ (YouTube Ads)",            p:"4,000â€“8,000",  d:"5-10 Ø£ÙŠØ§Ù…",   g:"â€”",                                                 k:"50,000 Ù…Ø´Ø§Ù‡Ø¯Ø© Ø®Ù„Ø§Ù„ 60 ÙŠÙˆÙ…", c:"Ads"},
  41: {n:"ØªØ¯Ù‚ÙŠÙ‚ ÙˆØªØ­Ø³ÙŠÙ† Ø§Ù„Ø­Ù…Ù„Ø§Øª Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©",           p:"5,000â€“10,000", d:"5-10 Ø£ÙŠØ§Ù…",   g:"Ø§ÙƒØªØ´Ø§Ù 15+ Ù…Ø´ÙƒÙ„Ø© Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø¥ØµÙ„Ø§Ø­",                   k:"ØªÙˆÙÙŠØ± 30-60% Ù…Ù† Ø§Ù„Ø¥Ù†ÙØ§Ù‚ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†ÙŠ", c:"Ads"},
  43: {n:"ØªØ¯Ù‚ÙŠÙ‚ Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„ (CRO Audit)",         p:"6,000â€“12,000", d:"5-10 Ø£ÙŠØ§Ù…",   g:"Ø§ÙƒØªØ´Ø§Ù 15+ ÙØ±ØµØ© Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªØ·Ø¨ÙŠÙ‚",                    k:"ÙØ±Øµ ØªØ²ÙŠØ¯ Ø§Ù„ØªØ­ÙˆÙŠÙ„ 50-150%", c:"CRO"},
  44: {n:"ØµÙØ­Ø© Ù‡Ø¨ÙˆØ· Ø¹Ø§Ù„ÙŠØ© Ø§Ù„ØªØ­ÙˆÙŠÙ„ (Landing Page)", p:"5,000â€“12,000", d:"1-2 Ø£Ø³Ø¨ÙˆØ¹",   g:"Ø¥Ø¹Ø§Ø¯Ø© ØªØµÙ…ÙŠÙ… Ø¥Ø°Ø§ Ù„Ù… ÙŠØªØ­Ù‚Ù‚ 5% ØªØ­ÙˆÙŠÙ„",                k:"Ù…Ø¹Ø¯Ù„ ØªØ­ÙˆÙŠÙ„ 8%+", c:"CRO"},
  48: {n:"Ø¯Ù„ÙŠÙ„ Ù…Ø¨ÙŠØ¹Ø§Øª ØªÙØ§Ø¹Ù„ÙŠ (Sales Playbook)",    p:"8,000â€“16,000", d:"2-3 Ø£Ø³Ø§Ø¨ÙŠØ¹",  g:"Ø¬Ù„Ø³Ø© ØªØ¯Ø±ÙŠØ¨ Ù…Ø¬Ø§Ù†ÙŠØ© Ù„Ù„ÙØ±ÙŠÙ‚",                          k:"Ø²ÙŠØ§Ø¯Ø© Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¥ØºÙ„Ø§Ù‚ 30-50%", c:"Consulting"},
  52: {n:"Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ø§Ù„Ø¥Ø«Ø¨Ø§Øª Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ",           p:"3,000â€“6,500",  d:"2-3 Ø£Ø³Ø§Ø¨ÙŠØ¹",  g:"Ø¬Ù…Ø¹ 15+ Ø´Ù‡Ø§Ø¯Ø© Ø­Ù‚ÙŠÙ‚ÙŠØ©",                              k:"Ø²ÙŠØ§Ø¯Ø© Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„ 30-60%", c:"CRO"},
  55: {n:"Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø¥Ø­Ø§Ù„Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ (Referral Program)", p:"6,000â€“13,000", d:"2-3 Ø£Ø³Ø§Ø¨ÙŠØ¹",  g:"Ù…Ø´Ø§Ø±ÙƒØ© 10%+ Ù…Ù† Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø®Ù„Ø§Ù„ 90 ÙŠÙˆÙ…",                k:"20-40% Ù…Ù† Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ø¬Ø¯Ø¯ Ù…Ù† Ø¥Ø­Ø§Ù„Ø§Øª", c:"CRO"},
  57: {n:"ØªÙ‚Ø³ÙŠÙ… Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¨Ø±ÙŠØ¯ (Segmentation)",       p:"3,500â€“7,000",  d:"3-7 Ø£ÙŠØ§Ù…",    g:"ØªØ­Ø³ÙŠÙ† 40%+ ÙÙŠ Ø§Ù„Ù…Ù‚Ø§ÙŠÙŠØ³",                            k:"Ø²ÙŠØ§Ø¯Ø© Open Rate 60%+", c:"Email"},
  58: {n:"Ø³Ù„Ø³Ù„Ø© ØªØ±Ø­ÙŠØ¨ Ø¢Ù„ÙŠØ© (Welcome Sequence)",     p:"4,000â€“8,000",  d:"5-10 Ø£ÙŠØ§Ù…",   g:"Ø¥Ø¹Ø§Ø¯Ø© ÙƒØªØ§Ø¨Ø© Ø¥Ø°Ø§ Ù„Ù… ÙŠØªØ­Ù‚Ù‚ 15% ØªØ­ÙˆÙŠÙ„",               k:"ØªØ­ÙˆÙŠÙ„ 20-40% Ù…Ù† Ø§Ù„Ù…Ø´ØªØ±ÙƒÙŠÙ† Ù„Ø¹Ù…Ù„Ø§Ø¡", c:"Email"},
  59: {n:"Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ø³Ù„Ø© Ø§Ù„Ù…ØªØ±ÙˆÙƒØ©",                  p:"3,500â€“7,500",  d:"5-10 Ø£ÙŠØ§Ù…",   g:"Ø§Ø³ØªØ¹Ø§Ø¯Ø© 15%+ Ø£Ùˆ Ø¥Ø¹Ø§Ø¯Ø© ÙƒØªØ§Ø¨Ø©",                       k:"Ø§Ø³ØªØ¹Ø§Ø¯Ø© 20-30% Ù…Ù† Ø§Ù„Ø³Ù„Ø§Øª Ø§Ù„Ù…ØªØ±ÙˆÙƒØ©", c:"Email"},
  67: {n:"Ø´Ø®ØµÙŠØ© Ø§Ù„Ù…Ø´ØªØ±ÙŠ Ø§Ù„Ù…Ø«Ø§Ù„ÙŠ (Buyer Persona)",   p:"6,000â€“12,000", d:"1-2 Ø£Ø³Ø¨ÙˆØ¹",   g:"Ø¬Ù„Ø³Ø© ØªØ¯Ø±ÙŠØ¨ Ø§Ù„ÙØ±ÙŠÙ‚ Ù…Ø¬Ø§Ù†ÙŠØ©",                          k:"ØªØ­Ø³ÙŠÙ† Ø§Ø³ØªÙ‡Ø¯Ø§Ù Ø§Ù„ØªØ³ÙˆÙŠÙ‚ 80-120%", c:"Consulting"},
  71: {n:"ÙˆØ±Ø´Ø© Ø¹Ù…Ù„ Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© (Strategy Workshop)", p:"12,000â€“25,000",d:"ÙŠÙˆÙ… ÙƒØ§Ù…Ù„",    g:"Ø¬Ù„Ø³Ø© Ù…ØªØ§Ø¨Ø¹Ø© Ù…Ø¬Ø§Ù†ÙŠØ© Ø¨Ø¹Ø¯ 60 ÙŠÙˆÙ…",                    k:"Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ù…ÙˆØ­Ø¯Ø© + ØªÙˆÙÙŠØ± 100+ Ø³Ø§Ø¹Ø©/Ø´Ù‡Ø±", c:"Consulting"},
  73: {n:"Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø³ÙˆØ´ÙŠØ§Ù„ Ù…ÙŠØ¯ÙŠØ§",         p:"8,000â€“16,000", d:"1-2 Ø£Ø³Ø¨ÙˆØ¹",   g:"Ø§Ø³ØªØ´Ø§Ø±Ø© Ø±Ø¨Ø¹ Ø³Ù†ÙˆÙŠØ© Ù…Ø¬Ø§Ù†ÙŠØ©",                          k:"Ø²ÙŠØ§Ø¯Ø© Ø§Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ø¹Ø¶ÙˆÙŠ 200-400%", c:"Social"},
  75: {n:"Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø³Ù†Ø§Ø¨ Ø´Ø§Øª",                        p:"4,000â€“8,000",  d:"5-10 Ø£ÙŠØ§Ù…",   g:"â€”",                                                 k:"100,000 Ù…Ø´Ø§Ù‡Ø¯Ø© Ø®Ù„Ø§Ù„ 30 ÙŠÙˆÙ…", c:"Ads"},
  82: {n:"ØªØ­Ø³ÙŠÙ† Ù…Ù„ÙØ§Øª Ø§Ù„Ø³ÙˆØ´ÙŠØ§Ù„ Ù…ÙŠØ¯ÙŠØ§",              p:"2,000â€“4,500",  d:"2-4 Ø£ÙŠØ§Ù…",    g:"Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ø³ÙŠÙ† Ù…Ø¬Ø§Ù†ÙŠØ© Ø¨Ø¹Ø¯ 60 ÙŠÙˆÙ…",                    k:"Ø²ÙŠØ§Ø¯Ø© Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ù…Ù† Ø²Ø§Ø¦Ø± Ù„Ù…ØªØ§Ø¨Ø¹ 60-100%", c:"Social"},
  87: {n:"Ø¥Ø¹Ø¯Ø§Ø¯ Google Analytics 4",                p:"4,500â€“9,000",  d:"5-10 Ø£ÙŠØ§Ù…",   g:"Ø¯Ø¹Ù… ÙÙ†ÙŠ 60 ÙŠÙˆÙ… Ù…Ø¬Ø§Ù†ÙŠ",                              k:"Ø¯Ù‚Ø© Ø¨ÙŠØ§Ù†Ø§Øª 98%+", c:"Analytics"},
  88: {n:"Ù„ÙˆØ­Ø§Øª ØªØ­ÙƒÙ… ØªÙØ§Ø¹Ù„ÙŠØ© (Looker Studio)",      p:"3,500â€“7,500",  d:"5-10 Ø£ÙŠØ§Ù…",   g:"ØªØ­Ø¯ÙŠØ«Ø§Øª Ù…Ø¬Ø§Ù†ÙŠØ© 90 ÙŠÙˆÙ…",                             k:"ØªÙˆÙÙŠØ± 10-20 Ø³Ø§Ø¹Ø© Ø¹Ù…Ù„ Ø´Ù‡Ø±ÙŠØ§Ù‹", c:"Analytics"},
  91: {n:"ØªØªØ¨Ø¹ Ø§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª Ø§Ù„Ø´Ø§Ù…Ù„",                   p:"4,000â€“8,500",  d:"5-10 Ø£ÙŠØ§Ù…",   g:"Ø¥ØµÙ„Ø§Ø­ Ù…Ø¬Ø§Ù†ÙŠ Ù„Ø£ÙŠ Ù…Ø´ÙƒÙ„Ø© Ø®Ù„Ø§Ù„ 90 ÙŠÙˆÙ…",                k:"ØªØ­Ø³ÙŠÙ† ROAS Ø¨Ù€30-60%", c:"Analytics"},
  93: {n:"Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ø¥Ø³Ù†Ø§Ø¯ (Attribution Modeling)",    p:"7,000â€“14,000", d:"2-3 Ø£Ø³Ø§Ø¨ÙŠØ¹",  g:"Ø¬Ù„Ø³Ø© Ø´Ø±Ø­ Ù…ÙØµÙ„Ø© 90 Ø¯Ù‚ÙŠÙ‚Ø©",                          k:"Ø²ÙŠØ§Ø¯Ø© ROI Ø¨Ù€30-50%", c:"Analytics"},
  98: {n:"Ø­Ù…Ù„Ø© Ù…Ø¤Ø«Ø±ÙŠÙ† ØµØºØ§Ø± (Micro-Influencers)",    p:"10,000â€“25,000",d:"1-3 Ø£Ø´Ù‡Ø±",    g:"Ø§Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ù…ØªÙÙ‚ Ø¹Ù„ÙŠÙ‡ Ø£Ùˆ ØªØ¹ÙˆÙŠØ¶",                       k:"1,000,000+ ÙˆØµÙˆÙ„ Ø¨ØªÙƒÙ„ÙØ© Ù…Ù†Ø®ÙØ¶Ø©", c:"Social"},
  107:{n:"ØªØ­Ø³ÙŠÙ† ØµÙØ­Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª (Product CRO)",      p:"8,000â€“18,000", d:"2-3 Ø£Ø³Ø§Ø¨ÙŠØ¹",  g:"ØªØ­Ø³ÙŠÙ† 30%+ Ø£Ùˆ Ø¥Ø¹Ø§Ø¯Ø© Ø¹Ù…Ù„",                           k:"Ø²ÙŠØ§Ø¯Ø© Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„ 50-150%", c:"CRO"},
  AI1:{n:"Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ 24/7",        p:"8,000â€“18,000", d:"7 Ø£ÙŠØ§Ù… Ø¹Ù…Ù„",  g:"Ø¥ØµÙ„Ø§Ø­ Ù…Ø¬Ø§Ù†ÙŠ 30 ÙŠÙˆÙ…Ø§Ù‹",                              k:"Ø±Ø¯ ÙÙŠ Ø£Ù‚Ù„ Ù…Ù† 3 Ø«ÙˆØ§Ù†Ù + ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø§Ø³ØªÙØ³Ø§Ø±Ø§Øª Ø§Ù„ÙŠØ¯ÙˆÙŠØ© 40-60%", c:"AI"},
  AI2:{n:"Ø§Ù„Ù…ÙˆØ¸Ù Ø§Ù„Ø±Ù‚Ù…ÙŠ Ø§Ù„Ø°ÙƒÙŠ (AI Agent)",          p:"9,000â€“20,000", d:"7-12 ÙŠÙˆÙ…",    g:"Ø¶Ù…Ø§Ù† Ø£Ø¯Ø§Ø¡ 90 ÙŠÙˆÙ…Ø§Ù‹",                                k:"ØªÙˆÙÙŠØ± 15-20 Ø³Ø§Ø¹Ø© Ø¹Ù…Ù„ Ø£Ø³Ø¨ÙˆØ¹ÙŠØ§Ù‹", c:"AI"},
};

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   Ù…Ø¹Ø§Ù…Ù„Ø§Øª ROI [D]
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const MULTS = {
  SEO:       {v:"V",  cons:1.25, real:1.50, opt:1.80, maxCR:null, time:"60-90 ÙŠÙˆÙ…"},
  Ads:       {v:"V",  cons:1.40, real:1.70, opt:2.20, maxCR:null, time:"7-14 ÙŠÙˆÙ…"},
  CRO:       {v:"CR", cons:1.35, real:1.65, opt:2.00, maxCR:15,   time:"14-30 ÙŠÙˆÙ…"},
  Email:     {v:"R",  cons:1.15, real:1.25, opt:1.40, maxCR:null, time:"7-21 ÙŠÙˆÙ…"},
  Social:    {v:"V",  cons:1.30, real:1.60, opt:2.00, maxCR:null, time:"14-45 ÙŠÙˆÙ…"},
  Analytics: {v:"V",  cons:1.20, real:1.35, opt:1.55, maxCR:null, time:"ÙÙˆØ±ÙŠ"},
  Consulting:{v:"V",  cons:1.15, real:1.25, opt:1.40, maxCR:null, time:"45-90 ÙŠÙˆÙ…"},
  AI:        {v:"CR", cons:1.20, real:1.35, opt:1.55, maxCR:15,   time:"ÙÙˆØ±ÙŠ"},
};

function avgPrice(str) {
  const clean = str.replace(/,/g,'').replace(/[â€“â€”\-]/,'\n');
  const [a,b] = clean.split('\n').map(Number);
  return (!b || isNaN(b)) ? (a||0) : (a+b)/2;
}

function calcROI(V, CR, AOV, id) {
  const s = SVC[id]; if(!s) return null;
  const m = MULTS[s.c]; if(!m) return null;
  const SC = avgPrice(s.p);
  const R  = V*(CR/100)*AOV;
  const fmt = x => Math.round(x).toLocaleString('ar-SA');

  function sc(mult) {
    let Vn=V, CRn=CR, Rn;
    if(m.v==='V') { Vn=V*mult; Rn=Vn*(CR/100)*AOV; }
    if(m.v==='CR'){ CRn=Math.min(CR*mult,m.maxCR||99); Rn=V*(CRn/100)*AOV; }
    if(m.v==='R') { Rn=R*mult; }
    const Re = Rn-R;
    const roi = SC>0 ? ((Re*3-SC)/SC*100).toFixed(0) : 0;
    const be  = Re>0 ? Math.round(SC/(Re/30)) : 'â€”';
    const vLbl = m.v==='V' ? fmt(Vn)+' Ø²Ø§Ø¦Ø±'
               : m.v==='CR'? CRn.toFixed(2)+'%'
               : fmt(Rn)+' Ø±';
    return {vLbl, Re:fmt(Re), roi, be};
  }
  return {
    R:fmt(R), SC:fmt(Math.round(SC)),
    lbl: m.v==='V'?'Ø§Ù„Ø²ÙˆØ§Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯': m.v==='CR'?'Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„':'Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯',
    cons:sc(m.cons), real:sc(m.real), opt:sc(m.opt),
    time:m.time,
  };
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   Ø®Ø±ÙŠØ·Ø© Ø§Ù„ØªÙˆØµÙŠØ© [K] â€” Ù…ÙÙˆØ³ÙÙ‘Ø¹Ø© Ù„Ù€ 3-5 Ø®Ø¯Ù…Ø§Øª
   
   ÙƒÙ„ Ù…Ø³Ø§Ø± ÙŠØ­ØªÙˆÙŠ Ø§Ù„Ø¢Ù† Ø¹Ù„Ù‰:
   [Ø£ÙˆÙ„ÙˆÙŠØ© Ø£ÙˆÙ„Ù‰ØŒ Ù…ÙƒÙ…Ù„Ø©ØŒ Ø¯Ø§Ø¹Ù…Ø©ØŒ Ø§Ø®ØªÙŠØ§Ø±ÙŠØ©...]
   Ù…Ø±ØªØ¨Ø© Ù…Ù† Ø§Ù„Ø£Ø¹Ù„Ù‰ ØªØ£Ø«ÙŠØ±Ø§Ù‹ Ù„Ù„Ø£Ù‚Ù„
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const KMAP = {
  /* ÙÙƒØ±Ø© Ø¬Ø¯ÙŠØ¯Ø© */
  "new-a":{any:   [67,  12,  71]},
  "new-b":{small: [3,   82,  10],   med: [71, 67, 12,  3],  big:[71, 67, 73, 12]},
  "new-c":{any:   [71,  9,   67,  67]},

  /* Ù†Ø´Ø§Ø· Ù‚Ø§Ø¦Ù… */
  "act-a":{small: [3,   10,  82],   med: [1,  35, 16, 10],  big:[16, 40, 35, 34,  1]},
  "act-b":{small: [52,  44,  9],    med: [43, 59, 52, 44],  big:[107,34, 43, 44, 59]},
  "act-c":{small: [58,  52,  57],   med: [57, 55, 58, 87],  big:[48, 87, 57, 55, 91]},

  /* Ø´Ø±ÙƒØ© Ø±Ø§Ø³Ø®Ø© */
  "est-a":{small: [73,  82,  35],   med: [98, 73, 40, 35],  big:[98, 73, 40, 35, 75]},
  "est-b":{small: [41,  38,  91],   med: [41, 38, 93, 91],  big:[41, 38, 93, 87, 91]},
  "est-c":{small: [91,  87,  88],   med: [91, 93, 87, 88],  big:[91, 93, 88, 48, 87]},
};

function getRecs(type, ch, budget) {
  const m = KMAP[`${type}-${ch}`];
  if(!m) return [35,44,52];
  return (m.any || m[budget] || m.med || m.big || m.small || [35,44]).slice(0,5);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let S = {
  phase:0, q1:null, q2:null, q3:null,
  V:null, CR:null, AOV:null, hasWeb:false,
  usedDefaultCR:false, recs:[], rejections:0, waiting:false,
};

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DOM + Ø¯ÙˆØ§Ù„ Ù…Ø³Ø§Ø¹Ø¯Ø©
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const $chat  = document.getElementById('chatArea');
const $input = document.getElementById('userInput');
const $send  = document.getElementById('sendBtn');
const PHASE_LABELS = ['Ø§Ù„ØªØ±Ø­ÙŠØ¨','Ø§Ù„ØªØ´Ø®ÙŠØµ','Ø¨ÙŠØ§Ù†Ø§Øª ROI','Ø§Ù„ØªÙˆØµÙŠØ©'];

function setPhase(n) {
  [0,1,2,3].forEach(i=>{
    const d = document.getElementById('ph'+i);
    d.className = 'phase-dot'+(i<n?' done':i===n?' active':'');
  });
  document.getElementById('phLabel').textContent = PHASE_LABELS[Math.min(n,3)];
}
function scrollEnd(){ setTimeout(()=>$chat.scrollTop=$chat.scrollHeight, 80); }
function showTyping(){
  const r=document.createElement('div');
  r.className='typing-row'; r.id='typing';
  r.innerHTML=`<div class="msg-avatar">ğŸ¤–</div><div class="dots"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>`;
  $chat.appendChild(r); scrollEnd();
}
function hideTyping(){ const t=document.getElementById('typing'); if(t)t.remove(); }

function addMsg(html, isBot=true, replies=[], formHtml='') {
  hideTyping();
  const row=document.createElement('div');
  row.className='msg-row'+(isBot?'':' user');
  const av=document.createElement('div');
  av.className='msg-avatar'+(isBot?'':' user-av');
  av.textContent=isBot?'ğŸ¤–':'ğŸ‘¤';
  const bub=document.createElement('div');
  bub.className='bubble '+(isBot?'bot':'user');
  bub.innerHTML=html+(isBot?formHtml:'');
  if(isBot){row.append(av,bub);}else{row.append(bub,av);}
  $chat.appendChild(row);
  if(replies.length){
    const qr=document.createElement('div');
    qr.className='quick-replies';
    replies.forEach(r=>{
      const btn=document.createElement('button');
      btn.className='qr-btn'; btn.textContent=r.label;
      btn.addEventListener('click',()=>handleQR(r,btn,qr));
      qr.appendChild(btn);
    });
    $chat.appendChild(qr);
  }
  scrollEnd();
}

function botMsg(html, delay=600, replies=[], formHtml='') {
  S.waiting=true; $input.disabled=true; $send.disabled=true;
  showTyping();
  setTimeout(()=>{
    addMsg(html,true,replies,formHtml);
    S.waiting=false; $input.disabled=false; $send.disabled=false;
    $input.focus();
  }, delay);
}
function userMsg(t){ addMsg(t,false); }

function handleQR(r,btn,qr){
  if(btn.disabled)return;
  qr.querySelectorAll('.qr-btn').forEach(b=>b.disabled=true);
  btn.classList.add('selected');
  userMsg(r.label);
  setTimeout(r.action, 300);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   â”€â”€â”€ Ø§Ù„Ø­Ù„ Ø§Ù„Ø¬Ø°Ø±ÙŠ Ù„Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ø£Ø²Ø±Ø§Ø± â”€â”€â”€
   
   Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† onclick="" Ø¯Ø§Ø®Ù„ innerHTML (Ø§Ù„Ø°ÙŠ
   ÙŠÙØ´Ù„ ÙÙŠ Ø¨Ø¹Ø¶ Ø§Ù„Ø³ÙŠØ§Ù‚Ø§Øª)ØŒ Ù†Ø³ØªØ®Ø¯Ù… Event
   Delegation ÙˆØ§Ø­Ø¯Ø§Ù‹ Ø¹Ù„Ù‰ $chat ÙŠØ³ØªÙ…Ø¹ Ù„ÙƒÙ„
   Ø§Ù„Ø£Ø­Ø¯Ø§Ø« ÙˆÙŠÙÙˆØ¬Ù‘Ù‡Ù‡Ø§ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ data-action.
   
   Ù‡Ø°Ø§ ÙŠØ¹Ù†ÙŠ:
   - Ù„Ø§ Ø¥Ø¹Ø§Ø¯Ø© ØªØ³Ø¬ÙŠÙ„ Ø¹Ù†Ø¯ ÙƒÙ„ Ø±Ø³Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©
   - ÙŠØ¹Ù…Ù„ 100% Ù…Ø¹ Ø§Ù„Ù€ HTML Ø§Ù„Ù…ÙØ­Ù‚ÙÙ† Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹
   - Ø£Ø¯Ø§Ø¡ Ø£ÙØ¶Ù„ Ø¨ÙƒØ«ÙŠØ± Ù…Ù† handlers Ù…Ù†ÙØ±Ø¯Ø©
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
$chat.addEventListener('click', function(e) {
  const target = e.target.closest('[data-action]');
  if(!target) return;
  const action = target.dataset.action;

  switch(action) {
    case 'web-yes':
      S.hasWeb = true;
      document.querySelectorAll('.roi-toggle-btn').forEach(b=>{
        b.classList.toggle('active', b.dataset.action==='web-yes');
      });
      break;
    case 'web-no':
      S.hasWeb = false;
      document.querySelectorAll('.roi-toggle-btn').forEach(b=>{
        b.classList.toggle('active', b.dataset.action==='web-no');
      });
      break;
    case 'roi-submit':
      submitROI();
      break;
  }
});

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   Ù…Ø³Ø§Ø± Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function start(){
  setPhase(0);
  botMsg(`Ù…Ø±Ø­Ø¨Ø§Ù‹! ğŸ‘‹ Ø£Ù†Ø§ <strong>Ù…Ù‡Ù†Ø¯Ø³ Ø§Ù„Ù†Ù…Ùˆ Ø§Ù„Ø±Ù‚Ù…ÙŠ</strong>.<br><br>
Ø³Ø£Ø³Ø§Ø¹Ø¯Ùƒ ÙÙŠ Ø§Ø®ØªÙŠØ§Ø± Ø£ÙØ¶Ù„ 3-5 Ø®Ø¯Ù…Ø§Øª ØªÙ†Ø§Ø³Ø¨ ÙˆØ¶Ø¹Ùƒ ØªØ­Ø¯ÙŠØ¯Ø§Ù‹ â€” <strong>Ø¨Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ù„Ø§ Ø¨Ø§Ù„ØªØ®Ù…ÙŠÙ†</strong>.<br><br>
3 Ø£Ø³Ø¦Ù„Ø© Ø³Ø±ÙŠØ¹Ø©ØŒ Ø«Ù… Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¹Ø§Ø¦Ø¯ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹ Ø¨Ø§Ù„Ø±ÙŠØ§Ù„ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ.`,
  800,[
    {label:'âœ… Ù†Ø¹Ù…ØŒ Ø§Ø¨Ø¯Ø£',            action:askQ1},
    {label:'ğŸ¤ Ø£Ø±ÙŠØ¯ Ø§Ù„ØªØ­Ø¯Ø« Ù…Ø¹ Ø¥Ù†Ø³Ø§Ù†', action:talkHuman},
  ]);
}

function askQ1(){
  S.phase=1; setPhase(1);
  botMsg(`ğŸ¢ <strong>Ø§Ù„Ø³Ø¤Ø§Ù„ 1 Ù…Ù† 3:</strong><br>Ù…Ø§ Ù†ÙˆØ¹ Ø¹Ù…Ù„Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠØŸ`,500,[
    {label:'ğŸ’¡ ÙÙƒØ±Ø© Ø¬Ø¯ÙŠØ¯Ø© â€” Ù„Ù… ØªÙØ·Ù„Ù‚ Ø¨Ø¹Ø¯',     action:()=>setQ1('new')},
    {label:'ğŸŒ± Ù†Ø´Ø§Ø· Ù‚Ø§Ø¦Ù… â€” Ø£Ù‚Ù„ Ù…Ù† Ø³Ù†ØªÙŠÙ†',       action:()=>setQ1('act')},
    {label:'ğŸ›ï¸ Ø´Ø±ÙƒØ© Ø±Ø§Ø³Ø®Ø© â€” Ø£ÙƒØ«Ø± Ù…Ù† 3 Ø³Ù†ÙˆØ§Øª',  action:()=>setQ1('est')},
  ]);
}
function setQ1(v){S.q1=v; askQ2();}

function askQ2(){
  const opts={
    new:{t:'Ù…Ø§ Ø£ÙƒØ¨Ø± Ø¹Ø§Ø¦Ù‚ Ø£Ù…Ø§Ù…Ùƒ Ø§Ù„Ø¢Ù†ØŸ',c:[
      {label:'ğŸ” Ù„Ø§ Ø£Ø¹Ø±Ù Ø¥Ù† ÙƒØ§Ù†Øª Ø§Ù„ÙÙƒØ±Ø© Ù…Ø¬Ø¯ÙŠØ©',  action:()=>setQ2('a')},
      {label:'ğŸ—ºï¸ Ù„Ø§ Ø£Ø¹Ø±Ù Ø§Ù„Ø®Ø·ÙˆØ§Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ù„Ù„Ø¨Ø¯Ø¡', action:()=>setQ2('b')},
      {label:'ğŸ“‹ Ø£Ø­ØªØ§Ø¬ Ø®Ø·Ø© Ø¹Ù…Ù„ ÙˆØ§Ø¶Ø­Ø©',            action:()=>setQ2('c')},
    ]},
    act:{t:'Ù…Ø§ Ø£ÙƒØ¨Ø± ØªØ­Ø¯Ù ØªÙˆØ§Ø¬Ù‡Ù‡ Ø§Ù„Ø¢Ù†ØŸ',c:[
      {label:'ğŸ‘ï¸ Ù„Ø§ Ø£Ø­Ø¯ ÙŠØ¹Ø±Ù Ø¨ÙˆØ¬ÙˆØ¯ÙŠ â€” Ù…Ø´ÙƒÙ„Ø© Ø¸Ù‡ÙˆØ±', action:()=>setQ2('a')},
      {label:'ğŸ›’ Ø²ÙˆØ§Ø± ÙƒØ«ÙŠØ±ÙˆÙ† Ù„ÙƒÙ† Ù„Ø§ Ù…Ø¨ÙŠØ¹Ø§Øª',          action:()=>setQ2('b')},
      {label:'ğŸ“‰ Ù…Ø¨ÙŠØ¹Ø§Øª ØºÙŠØ± Ù…Ø³ØªÙ‚Ø±Ø© â€” Ù…Ø´ÙƒÙ„Ø© Ù†Ø¸Ø§Ù…',    action:()=>setQ2('c')},
    ]},
    est:{t:'Ù…Ø§ Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ø£Ù‡Ù… Ù„Ø¯ÙŠÙƒ Ø§Ù„Ø¢Ù†ØŸ',c:[
      {label:'ğŸ“ˆ ØªÙˆØ³ÙŠØ¹ Ø§Ù„Ø­ØµØ© Ø§Ù„Ø³ÙˆÙ‚ÙŠØ©',              action:()=>setQ2('a')},
      {label:'ğŸ’° ØªÙ‚Ù„ÙŠÙ„ ØªÙƒÙ„ÙØ© Ø§ÙƒØªØ³Ø§Ø¨ Ø§Ù„Ø¹Ù…ÙŠÙ„ (CAC)',  action:()=>setQ2('b')},
      {label:'âš™ï¸ Ø¨Ù†Ø§Ø¡ Ù†Ø¸Ø§Ù… Ù…Ø¨ÙŠØ¹Ø§Øª Ù‚Ø§Ø¨Ù„ Ù„Ù„Ù‚ÙŠØ§Ø³',    action:()=>setQ2('c')},
    ]},
  };
  const o=opts[S.q1];
  botMsg(`ğŸ¯ <strong>Ø§Ù„Ø³Ø¤Ø§Ù„ 2 Ù…Ù† 3:</strong><br>${o.t}`,500,o.c);
}
function setQ2(v){S.q2=v; askQ3();}

function askQ3(){
  botMsg(`ğŸ’° <strong>Ø§Ù„Ø³Ø¤Ø§Ù„ 3 Ù…Ù† 3:</strong><br>Ù…Ø§ Ù…ÙŠØ²Ø§Ù†ÙŠØªÙƒ Ø§Ù„Ø´Ù‡Ø±ÙŠØ© Ù„Ù„ØªØ³ÙˆÙŠÙ‚ØŸ`,500,[
    {label:'ğŸŸ¡ Ø£Ù‚Ù„ Ù…Ù† 5,000 Ø±ÙŠØ§Ù„',   action:()=>setQ3('small')},
    {label:'ğŸ”µ 5,000 â€” 15,000 Ø±ÙŠØ§Ù„', action:()=>setQ3('med')},
    {label:'ğŸŸ¢ Ø£ÙƒØ«Ø± Ù…Ù† 15,000 Ø±ÙŠØ§Ù„', action:()=>setQ3('big')},
  ]);
}
function setQ3(v){S.q3=v; S.phase=2; setPhase(2); askROI();}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   Ù†Ù…ÙˆØ°Ø¬ ROI â€” Ø¨Ø¯ÙˆÙ† Ø£ÙŠ onclick=""
   ÙƒÙ„ Ø§Ù„Ø£Ø²Ø±Ø§Ø± ØªØ³ØªØ®Ø¯Ù… data-action ÙˆÙŠÙØ¹Ø§Ù„Ø¬Ù‡Ø§
   Ø§Ù„Ù€ event listener Ø§Ù„Ù…Ø±ÙƒØ²ÙŠ Ø£Ø¹Ù„Ø§Ù‡
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function askROI(){
  S.hasWeb = false; // Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©: Ù„Ø§ Ù…ÙˆÙ‚Ø¹

  const formHtml = `
    <div class="roi-form" id="roiForm">

      <div class="roi-field">
        <label>1ï¸âƒ£ Ø¹Ø¯Ø¯ Ø§Ù„Ø²ÙˆØ§Ø± Ø§Ù„Ø´Ù‡Ø±ÙŠÙŠÙ† Ù„Ù„Ù…ÙˆÙ‚Ø¹</label>
        <div class="field-wrap">
          <input type="number" id="fV" min="0" step="1"
                 placeholder="Ù…Ø«Ø§Ù„: 2000 â€” Ø£Ø¯Ø®Ù„ 0 Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù„Ø¯ÙŠÙƒ Ù…ÙˆÙ‚Ø¹"/>
          <span class="unit">Ø²Ø§Ø¦Ø±/Ø´Ù‡Ø±</span>
        </div>
      </div>

      <div class="roi-field">
        <label>2ï¸âƒ£ Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø­Ø§Ù„ÙŠ</label>
        <div class="field-wrap">
          <input type="number" id="fCR" min="0" max="100" step="0.1"
                 placeholder="Ù…Ø«Ø§Ù„: 1.5 â€” Ø§ØªØ±ÙƒÙ‡ ÙØ§Ø±ØºØ§Ù‹ Ø¥Ø°Ø§ Ù„Ù… ØªØ¹Ø±Ù"/>
          <span class="unit">%</span>
        </div>
        <span class="field-hint">Ø¥Ø°Ø§ ØªØ±ÙƒØªÙ‡ ÙØ§Ø±ØºØ§Ù‹ Ø³Ù†Ø³ØªØ®Ø¯Ù… 1.5% (Ù…ØªÙˆØ³Ø· Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ)</span>
      </div>

      <div class="roi-field">
        <label>3ï¸âƒ£ Ù…ØªÙˆØ³Ø· Ù‚ÙŠÙ…Ø© Ø§Ù„Ø·Ù„Ø¨ Ø£Ùˆ Ø§Ù„Ø®Ø¯Ù…Ø© Ø§Ù„ÙˆØ§Ø­Ø¯Ø©</label>
        <div class="field-wrap">
          <input type="number" id="fAOV" min="0" step="1"
                 placeholder="Ù…Ø«Ø§Ù„: 500"/>
          <span class="unit">Ø±ÙŠØ§Ù„</span>
        </div>
      </div>

      <div class="roi-field">
        <label>4ï¸âƒ£ Ù‡Ù„ Ù„Ø¯ÙŠÙƒ Ù…ÙˆÙ‚Ø¹ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙØ¹Ù„ÙŠØŸ</label>
        <div class="roi-toggle">
          <button class="roi-toggle-btn" data-action="web-yes">âœ… Ù†Ø¹Ù…ØŒ Ù„Ø¯ÙŠÙ‘ Ù…ÙˆÙ‚Ø¹</button>
          <button class="roi-toggle-btn active" data-action="web-no">âŒ Ù„Ø§ØŒ Ø£Ù†Ø´Ø· Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙˆØ´ÙŠØ§Ù„ ÙÙ‚Ø·</button>
        </div>
      </div>

      <div class="roi-error" id="roiErr"></div>

      <button class="roi-submit" data-action="roi-submit">ğŸ”¢ Ø§Ø­Ø³Ø¨ Ø§Ù„Ø¹Ø§Ø¦Ø¯ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹</button>
    </div>`;

  botMsg(
    `ğŸ”¢ Ù…Ù…ØªØ§Ø²! Ù„Ø£Ø¹Ø·ÙŠÙƒ Ø£Ø±Ù‚Ø§Ù…Ø§Ù‹ Ø¯Ù‚ÙŠÙ‚Ø© Ø£Ø­ØªØ§Ø¬ 4 Ù…Ø¹Ø·ÙŠØ§Øª:<br>
     <span style="font-size:11px;color:var(--text-muted)">âš ï¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø­Ø³Ø§Ø¨ ÙÙ‚Ø· ÙˆÙ„Ù† ØªÙØ­ÙØ¸.</span>`,
    700, [], formHtml
  );
}

function submitROI(){
  const errEl = document.getElementById('roiErr');
  errEl.classList.remove('show');

  const vRaw   = document.getElementById('fV').value.trim();
  const crRaw  = document.getElementById('fCR').value.trim();
  const aovRaw = document.getElementById('fAOV').value.trim();

  // V ÙŠÙ‚Ø¨Ù„ 0 (Ù†Ø´Ø§Ø· Ø¨Ø¯ÙˆÙ† Ù…ÙˆÙ‚Ø¹)
  const V   = vRaw==='' ? 0 : parseFloat(vRaw);
  // CR ÙØ§Ø±Øº = 1.5% Ø§ÙØªØ±Ø§Ø¶ÙŠ
  const CR  = crRaw==='' ? null : parseFloat(crRaw);
  // AOV Ù‡Ùˆ Ø§Ù„ÙˆØ­ÙŠØ¯ Ø§Ù„Ø¥Ù„Ø²Ø§Ù…ÙŠ
  const AOV = parseFloat(aovRaw);

  if(aovRaw==='' || isNaN(AOV) || AOV<=0){
    errEl.textContent='âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…ØªÙˆØ³Ø· Ù‚ÙŠÙ…Ø© Ø§Ù„Ø·Ù„Ø¨ â€” Ù‡Ø°Ø§ Ø§Ù„Ø­Ù‚Ù„ Ø¥Ù„Ø²Ø§Ù…ÙŠ Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¹Ø§Ø¦Ø¯';
    errEl.classList.add('show');
    document.getElementById('fAOV').focus();
    return;
  }

  // CR Ù…Ø±ØªÙØ¹ Ø¬Ø¯Ø§Ù‹ â€” Ù†Ø³ØªÙØ³Ø±
  if(CR!==null && CR>20){
    document.querySelector('[data-action="roi-submit"]').disabled=true;
    botMsg(
      `Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„ ${CR}% Ù…Ø±ØªÙØ¹ Ø¬Ø¯Ø§Ù‹ Ø¹Ù† Ø§Ù„Ù…Ø¹ØªØ§Ø¯.<br>
       Ù‡Ù„ ØªÙ‚ØµØ¯ ÙØ¹Ù„Ø§Ù‹ Ø£Ù† <strong>${CR}</strong> Ù…Ù† ÙƒÙ„ 100 Ø²Ø§Ø¦Ø± ÙŠÙÙƒÙ…Ù„ÙˆÙ† Ø´Ø±Ø§Ø¡Ù‹ØŸ`,
      500,[
        {label:`Ù†Ø¹Ù…ØŒ ${CR}% ØµØ­ÙŠØ­`,         action:()=>finishROI(V,CR,AOV)},
        {label:'Ù„Ø§ØŒ Ø§Ø³ØªØ®Ø¯Ù… 1.5% Ø§ÙØªØ±Ø§Ø¶ÙŠ',  action:()=>finishROI(V,1.5,AOV,true)},
      ]
    );
    return;
  }

  finishROI(V, CR??1.5, AOV, CR===null);
}

function finishROI(V, CR, AOV, usedDefault=false){
  S.V=V; S.CR=CR; S.AOV=AOV; S.usedDefaultCR=usedDefault;

  if(V===0 && !S.hasWeb){
    botMsg(
      `Ù„Ø§ Ù…Ø´ÙƒÙ„Ø©! Ø³Ù†Ø¨Ù†ÙŠ Ø§Ù„ØªÙˆØµÙŠØ© Ø¹Ù„Ù‰ Ù†ÙˆØ¹ ØªØ­Ø¯ÙŠÙƒ Ù…Ø¨Ø§Ø´Ø±Ø©.<br>
       ğŸ“Œ Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù…ÙˆØµÙ‰ Ø¨Ù‡Ø§ Ø³ØªØ±ÙƒØ² Ø¹Ù„Ù‰ <strong>Ø¨Ù†Ø§Ø¡ Ø§Ù„ÙˆØ¹ÙŠ ÙˆØ¬Ø°Ø¨ Ø§Ù„Ø²ÙˆØ§Ø±</strong> Ø£ÙˆÙ„Ø§Ù‹.`,
      500
    );
    setTimeout(showResult, 950);
    return;
  }
  showResult();
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   Ø¹Ø±Ø¶ Ø§Ù„ØªÙˆØµÙŠØ© â€” 3 Ø¥Ù„Ù‰ 5 Ø®Ø¯Ù…Ø§Øª
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function showResult(){
  S.phase=3; setPhase(3);
  const ids=getRecs(S.q1,S.q2,S.q3);
  S.recs=ids;

  const TL={new:'ÙÙƒØ±Ø© Ø¬Ø¯ÙŠØ¯Ø©',  act:'Ù†Ø´Ø§Ø· Ù‚Ø§Ø¦Ù…', est:'Ø´Ø±ÙƒØ© Ø±Ø§Ø³Ø®Ø©'};
  const CL={
    a: S.q1==='new'?'Ù„Ø§ Ø£Ø¹Ø±Ù Ø¬Ø¯ÙˆÙ‰ Ø§Ù„ÙÙƒØ±Ø©': S.q1==='act'?'Ø¶Ø¹Ù Ø§Ù„Ø¸Ù‡ÙˆØ± ÙˆØ§Ù„ÙˆØ¹ÙŠ':'Ø§Ù„ØªÙˆØ³Ø¹ ÙÙŠ Ø§Ù„Ø³ÙˆÙ‚',
    b: S.q1==='new'?'Ù„Ø§ Ø£Ø¹Ø±Ù ÙƒÙŠÙ Ø£Ø¨Ø¯Ø£':    S.q1==='act'?'Ø²ÙˆØ§Ø± Ø¨Ù„Ø§ Ù…Ø¨ÙŠØ¹Ø§Øª':   'ØªÙ‚Ù„ÙŠÙ„ ØªÙƒÙ„ÙØ© Ø§Ù„Ø§ÙƒØªØ³Ø§Ø¨',
    c: S.q1==='new'?'Ø£Ø­ØªØ§Ø¬ Ø®Ø·Ø© Ø¹Ù…Ù„':        S.q1==='act'?'Ù…Ø¨ÙŠØ¹Ø§Øª ØºÙŠØ± Ù…Ø³ØªÙ‚Ø±Ø©': 'Ø¨Ù†Ø§Ø¡ Ù†Ø¸Ø§Ù… Ù…Ø¨ÙŠØ¹Ø§Øª',
  };
  const BL={small:'Ø£Ù‚Ù„ Ù…Ù† 5,000 Ø±', med:'5,000â€“15,000 Ø±', big:'Ø£ÙƒØ«Ø± Ù…Ù† 15,000 Ø±'};

  const V=S.V||0, CR=S.CR||1.5, AOV=S.AOV||0;
  const R=Math.round(V*(CR/100)*AOV);

  /* â”€â”€ ØªØ¹Ø±ÙŠÙØ§Øª Ø§Ù„Ø´Ø§Ø±Ø§Øª Ø­Ø³Ø¨ Ø§Ù„ØªØ±ØªÙŠØ¨ â”€â”€ */
  const BADGES=[
    {cls:'badge-gold',   icon:'ğŸ¥‡', lbl:'Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ø£ÙˆÙ„Ù‰ â€” Ø§Ù„Ø£Ø¹Ù„Ù‰ ØªØ£Ø«ÙŠØ±Ø§Ù‹'},
    {cls:'badge-silver', icon:'ğŸ¥ˆ', lbl:'Ù…ÙƒÙ…Ù‘Ù„Ø© â€” ØªÙØ¶Ø§Ø¹Ù Ø£Ø«Ø± Ø§Ù„Ø£ÙˆÙ„Ù‰'},
    {cls:'badge-supp',   icon:'ğŸ¥‰', lbl:'Ø¯Ø§Ø¹Ù…Ø© â€” ØªÙØ¹Ø¬Ù‘Ù„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬'},
    {cls:'badge-supp',   icon:'4ï¸âƒ£', lbl:'ØªÙˆØ³Ø¹ÙŠØ© â€” Ø¨Ø¹Ø¯ ØªØ«Ø¨ÙŠØª Ø§Ù„Ù†ØªØ§Ø¦Ø¬'},
    {cls:'badge-supp',   icon:'5ï¸âƒ£', lbl:'Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© â€” Ù„Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©'},
  ];

  function svcCard(id, idx){
    const s=SVC[id]; if(!s)return '';
    const roi = calcROI(V,CR,AOV,id);
    const b = BADGES[idx] || BADGES[2];
    const priorityClass = idx===0?'priority-1':idx===1?'priority-2':'';

    // Ø¬Ø¯ÙˆÙ„ ROI ÙÙ‚Ø· Ù„Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø£ÙˆÙ„Ù‰ ÙˆØ§Ù„Ø«Ø§Ù†ÙŠØ© ÙˆØ¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙƒØ§ÙÙŠØ©
    let table='';
    if(roi && V>0 && AOV>0 && idx<3){
      table=`
        <table class="roi-table" style="margin-top:10px">
          <tr>
            <th></th>
            <th><span class="stag s-cons">Ù…Ø­Ø§ÙØ¸</span></th>
            <th><span class="stag s-real">ÙˆØ§Ù‚Ø¹ÙŠ</span></th>
            <th><span class="stag s-opt">Ù…ØªÙØ§Ø¦Ù„</span></th>
          </tr>
          <tr>
            <td class="rl">${roi.lbl}</td>
            <td>${roi.cons.vLbl}</td><td>${roi.real.vLbl}</td><td>${roi.opt.vLbl}</td>
          </tr>
          <tr>
            <td class="rl">Ø¥ÙŠØ±Ø§Ø¯ Ø¥Ø¶Ø§ÙÙŠ/Ø´Ù‡Ø±</td>
            <td>${roi.cons.Re} Ø±</td><td>${roi.real.Re} Ø±</td><td>${roi.opt.Re} Ø±</td>
          </tr>
          <tr>
            <td class="rl">ROI (90 ÙŠÙˆÙ…)</td>
            <td>${roi.cons.roi}%</td><td>${roi.real.roi}%</td><td>${roi.opt.roi}%</td>
          </tr>
          <tr>
            <td class="rl">Ù†Ù‚Ø·Ø© Ø§Ù„ØªØ¹Ø§Ø¯Ù„</td>
            <td>${roi.cons.be} ÙŠÙˆÙ…</td><td>${roi.real.be} ÙŠÙˆÙ…</td><td>${roi.opt.be} ÙŠÙˆÙ…</td>
          </tr>
        </table>
        <div class="note">âš ï¸ Ø£Ø±Ù‚Ø§Ù… ØªÙ‚Ø¯ÙŠØ±ÙŠØ© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ù…Ø¹Ø¯Ù„Ø§Øª Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ 2026. ØªØ¹ØªÙ…Ø¯ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø¹Ù„Ù‰ Ø¬ÙˆØ¯Ø© Ø§Ù„ØªÙ†ÙÙŠØ° ÙˆØ§Ù„Ù…Ù†Ø§ÙØ³Ø©.</div>`;
    }
    return `
      <div class="svc-card ${priorityClass}">
        <div class="${b.cls}">${b.icon} ${b.lbl}</div>
        <div class="sct">Ø§Ù„Ø®Ø¯Ù…Ø© #${id}: ${s.n}</div>
        <div class="scr">ğŸ“Œ <span>${s.k}</span></div>
        <div class="scr">ğŸ’° Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±: <span>${s.p} Ø±ÙŠØ§Ù„</span></div>
        <div class="scr">â±ï¸ Ø§Ù„Ù…Ø¯Ø©: <span>${s.d}</span></div>
        <div class="scr">ğŸ›¡ï¸ Ø§Ù„Ø¶Ù…Ø§Ù†: <span>${s.g}</span></div>
        ${roi?`<div class="scr">âš¡ Ø£ÙˆÙ„ Ù†ØªÙŠØ¬Ø©: <span>Ø®Ù„Ø§Ù„ ${roi.time}</span></div>`:''}
        ${table}
      </div>`;
  }

  const defNote = S.usedDefaultCR
    ? `<div class="note">ğŸ“Œ Ø§Ø³ØªØ®Ø¯Ù…Ù†Ø§ 1.5% ÙƒÙ…Ø¹Ø¯Ù„ ØªØ­ÙˆÙŠÙ„ Ø§ÙØªØ±Ø§Ø¶ÙŠ â€” Ø£Ø¯Ø®Ù„ Ù…Ø¹Ø¯Ù„Ùƒ Ø§Ù„ÙØ¹Ù„ÙŠ Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø£Ø¯Ù‚.</div>` : '';
  const noData = (V===0||AOV===0)
    ? `<div class="note">ğŸ“Œ Ø¬Ø¯Ø§ÙˆÙ„ ROI ØºÙŠØ± Ù…ØªØ§Ø­Ø© Ù„Ø¹Ø¯Ù… ÙƒÙØ§ÙŠØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª â€” Ø§Ù„ØªÙˆØµÙŠØ© Ù…Ø¨Ù†ÙŠØ© Ø¹Ù„Ù‰ Ù†ÙˆØ¹ Ø§Ù„ØªØ­Ø¯ÙŠ.</div>` : '';

  let cardsHtml = ids.map((id,i)=>svcCard(id,i)).join('');

  const html=`ğŸ¯ <strong>Ø®Ø·ØªÙƒ Ø§Ù„ØªØ³ÙˆÙŠÙ‚ÙŠØ© Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø© (${ids.length} Ø®Ø¯Ù…Ø§Øª):</strong>

<span class="sec">ğŸ“Š ÙˆØ¶Ø¹Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ</span>
â€¢ Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…Ù„: <strong>${TL[S.q1]}</strong><br>
â€¢ Ø§Ù„ØªØ­Ø¯ÙŠ: <strong>${CL[S.q2]}</strong><br>
â€¢ Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©: <strong>${BL[S.q3]}</strong><br>
â€¢ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯ Ø§Ù„Ø±Ù‚Ù…ÙŠ Ø§Ù„Ù…Ù‚Ø¯ÙÙ‘Ø±: <strong>${R.toLocaleString('ar-SA')} Ø±ÙŠØ§Ù„/Ø´Ù‡Ø±</strong>
${defNote}${noData}

<span class="sec">ğŸ—‚ï¸ Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù…ÙˆØµÙ‰ Ø¨Ù‡Ø§</span>
${cardsHtml}
<span class="sec">ğŸš€ Ù…Ø§ Ø§Ù„ØªØ§Ù„ÙŠØŸ</span>`;

  botMsg(html, 1000,[
    {label:'ğŸ“‹ Ø£Ø±ÙŠØ¯ Ø¹Ø±Ø¶ Ø³Ø¹Ø± ØªÙØµÙŠÙ„ÙŠ',   action:offerQuote},
    {label:'ğŸ’¬ ØªØ­Ø¯Ø« Ù…Ø¹ Ù…Ø³ØªØ´Ø§Ø± Ø§Ù„Ø¢Ù†',    action:talkHuman},
    {label:'ğŸ”„ Ø£Ø¹Ø¯ Ø§Ù„ØªØ´Ø®ÙŠØµ Ù…Ù† Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©', action:resetFlow},
  ]);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   Ø­Ø§Ù„Ø§Øª Ø®Ø§ØµØ© [H]
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function offerQuote(){
  botMsg(`Ù…Ù…ØªØ§Ø²! ğŸ‰ Ø³ÙŠØµÙ„Ùƒ Ø§Ù„Ø¹Ø±Ø¶ Ø®Ù„Ø§Ù„ Ø³Ø§Ø¹ØªÙŠÙ† ÙŠØ´Ù…Ù„:<br>
âœ… Ø§Ù„Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© + Ø¬Ø¯ÙˆÙ„ Ø§Ù„ØªÙ†ÙÙŠØ° + Ø¹Ù‚Ø¯ Ø§Ù„Ø¹Ù…Ù„<br><br>
<strong>Ø£ÙØ¶Ù„ Ø·Ø±ÙŠÙ‚Ø© Ù„Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ÙƒØŸ</strong>`,
  500,[
    {label:'ğŸ“± ÙˆØ§ØªØ³Ø§Ø¨',           action:()=>confirmContact('ÙˆØ§ØªØ³Ø§Ø¨')},
    {label:'ğŸ“§ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ', action:()=>confirmContact('Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ')},
    {label:'ğŸ“ Ù…ÙƒØ§Ù„Ù…Ø© Ù‡Ø§ØªÙÙŠØ©',    action:()=>confirmContact('Ù…ÙƒØ§Ù„Ù…Ø© Ù‡Ø§ØªÙÙŠØ©')},
  ]);
}
function confirmContact(m){
  botMsg(`Ø´ÙƒØ±Ø§Ù‹! Ø³ÙŠØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ ÙØ±ÙŠÙ‚Ù†Ø§ Ø¹Ø¨Ø± <strong>${m}</strong> ÙÙŠ Ø£Ù‚Ø±Ø¨ ÙˆÙ‚Øª.<br>â° Ø§Ù„Ø³Ø¨Øªâ€“Ø§Ù„Ø®Ù…ÙŠØ³ØŒ 9Øµâ€“6Ù… ğŸ™`,500);
}
function talkHuman(){
  botMsg(`Ø¨ÙƒÙ„ Ø³Ø±ÙˆØ±! ğŸ¤<br><br>ğŸ“± <strong>ÙˆØ§ØªØ³Ø§Ø¨:</strong> [Ø±Ù‚Ù… Ø§Ù„Ø´Ø±ÙƒØ©]<br>ğŸ“§ <strong>Ø§Ù„Ø¨Ø±ÙŠØ¯:</strong> [Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø´Ø±ÙƒØ©]<br>â° Ø§Ù„Ø³Ø¨Øªâ€“Ø§Ù„Ø®Ù…ÙŠØ³ØŒ 9Øµâ€“6Ù…<br><br>Ø£Ùˆ Ø§ØªØ±Ùƒ Ø±Ù‚Ù…Ùƒ Ù‡Ù†Ø§ ÙˆØ³ÙŠØªØµÙ„ Ø¨Ùƒ Ù…Ø³ØªØ´Ø§Ø±Ù†Ø§ Ø®Ù„Ø§Ù„ 30 Ø¯Ù‚ÙŠÙ‚Ø©.`,500);
}
function resetFlow(){
  S={phase:0,q1:null,q2:null,q3:null,V:null,CR:null,AOV:null,hasWeb:false,usedDefaultCR:false,recs:[],rejections:0,waiting:false};
  botMsg(`Ø¨Ø§Ù„Ø·Ø¨Ø¹! Ù„Ù†Ø¨Ø¯Ø£ Ù…Ù† Ø¬Ø¯ÙŠØ¯ ğŸ¯`,400,[{label:'âœ… Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ´Ø®ÙŠØµ',action:askQ1}]);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   Ù…Ø¹Ø§Ù„Ø¬ Ø§Ù„Ù†Øµ Ø§Ù„Ø­Ø±
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function sendMessage(){
  const txt=$input.value.trim();
  if(!txt||S.waiting)return;
  $input.value='';
  userMsg(txt);
  if(/Ø¥Ù†Ø³Ø§Ù†|Ø¨Ø´Ø±|Ù…Ø³ØªØ´Ø§Ø±|ÙˆØ§ØªØ³Ø§Ø¨|ØªÙˆØ§ØµÙ„/i.test(txt)){talkHuman();return;}
  if(/Ù…Ù† Ø¬Ø¯ÙŠØ¯|Ø§Ø¨Ø¯Ø£|Ø¥Ø¹Ø§Ø¯Ø©|reset/i.test(txt)){resetFlow();return;}
  if(/Ø³Ø¹Ø±|ÙƒÙ…|ØªÙƒÙ„ÙØ©/i.test(txt)){
    botMsg(`ÙŠØ³Ø¹Ø¯Ù†ÙŠ! Ø³Ø¤Ø§Ù„ ÙˆØ§Ø­Ø¯ Ø³Ø±ÙŠØ¹: <strong>Ù…Ø§ Ø§Ù„Ù‡Ø¯Ù Ø§Ù„Ø°ÙŠ ØªØ±ÙŠØ¯ ØªØ­Ù‚ÙŠÙ‚Ù‡ØŸ</strong><br>Ù„Ø£Ù† Ù†ÙØ³ Ø§Ù„Ø®Ø¯Ù…Ø© Ù‚Ø¯ ØªÙƒÙˆÙ† Ø§Ø³ØªØ«Ù…Ø§Ø±Ø§Ù‹ Ø°ÙƒÙŠØ§Ù‹ Ù„Ø­Ø§Ù„Ø© ÙˆØ¥Ù†ÙØ§Ù‚Ø§Ù‹ Ø²Ø§Ø¦Ø¯Ø§Ù‹ Ù„Ø£Ø®Ø±Ù‰.`,600,[
      {label:'âœ… Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ´Ø®ÙŠØµ Ø£ÙˆÙ„Ø§Ù‹',      action:askQ1},
      {label:'ğŸ’¬ ØªÙˆØ§ØµÙ„ Ù…Ø¹ ÙØ±ÙŠÙ‚Ù†Ø§ Ù…Ø¨Ø§Ø´Ø±Ø©',  action:talkHuman},
    ]);
    return;
  }
  if(S.phase===3){
    S.rejections++;
    if(S.rejections>=2){talkHuman();return;}
    botMsg(`Ø£ÙÙ‡Ù… â€” Ù…Ø§ Ø§Ù„Ø°ÙŠ Ù„Ù… ÙŠÙ†Ø§Ø³Ø¨Ùƒ ØªØ­Ø¯ÙŠØ¯Ø§Ù‹ØŸ`,500,[
      {label:'ğŸ’¸ Ø§Ù„Ø³Ø¹Ø± Ù…Ø±ØªÙØ¹',            action:()=>botMsg('Ø³Ù†Ø¬Ø¯ Ù„Ùƒ Ø¨Ø¯ÙŠÙ„Ø§Ù‹ Ø£Ù‚Ù„ ØªÙƒÙ„ÙØ© ÙÙŠ Ù†ÙØ³ Ø§Ù„ÙØ¦Ø©.',500,[{label:'ğŸ”„ Ø£Ø¹Ø¯ Ø§Ù„ØªØ´Ø®ÙŠØµ',action:resetFlow}])},
      {label:'â³ Ø§Ù„Ù…Ø¯Ø© Ø·ÙˆÙŠÙ„Ø©',            action:()=>botMsg('Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†ÙŠØ© ØªÙØ¹Ø·ÙŠ Ù†ØªØ§Ø¦Ø¬ Ø®Ù„Ø§Ù„ 7-14 ÙŠÙˆÙ….',500,[{label:'ğŸ”„ Ø£Ø¹Ø¯ Ø§Ù„ØªØ´Ø®ÙŠØµ',action:resetFlow}])},
      {label:'â“ Ù„Ø§ ØªØ­Ù„ Ù…Ø´ÙƒÙ„ØªÙŠ',          action:resetFlow},
      {label:'ğŸ¤ Ø£Ø±ÙŠØ¯ Ø§Ù„ØªØ­Ø¯Ø« Ù…Ø¹ Ø¥Ù†Ø³Ø§Ù†',   action:talkHuman},
    ]);
    return;
  }
  if(S.phase===0){
    botMsg('Ù…Ø±Ø­Ø¨Ø§Ù‹! Ù‡Ù„ Ø£Ù†Øª Ù…Ø³ØªØ¹Ø¯ Ù„Ù„Ø¨Ø¯Ø¡ØŸ',400,[
      {label:'âœ… Ù†Ø¹Ù…ØŒ Ø§Ø¨Ø¯Ø£',action:askQ1},
      {label:'ğŸ¤ ØªØ­Ø¯Ø« Ù…Ø¹Ù†Ø§',action:talkHuman},
    ]);
    return;
  }
  botMsg(`Ø´ÙƒØ±Ø§Ù‹ Ø¹Ù„Ù‰ Ø±Ø³Ø§Ù„ØªÙƒ! ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒØŸ`,500,[
    {label:'ğŸ”„ Ø£Ø¹Ø¯ Ø§Ù„ØªØ´Ø®ÙŠØµ', action:resetFlow},
    {label:'ğŸ’¬ ØªØ­Ø¯Ø« Ù…Ø¹ Ù…Ø³ØªØ´Ø§Ø±',action:talkHuman},
  ]);
}

$send.addEventListener('click', sendMessage);
$input.addEventListener('keydown', e=>{
  if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();sendMessage();}
});

window.addEventListener('load',()=>setTimeout(start,300));
</script>
</body>
</html>
